<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.14.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Legofit: state.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Legofit
   </div>
   <div id="projectbrief">infers population history from nucleotide site patterns.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.14.0 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search/",'.html');
</script>
<script type="text/javascript">
$(function() { codefold.init(); });
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search',false);
  $(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle"><div class="title">state.c File Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Read and write "state files", which describe the state of the optmizer.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;state.h&quot;</code><br />
<code>#include &quot;error.h&quot;</code><br />
<code>#include &quot;misc.h&quot;</code><br />
<code>#include &lt;assert.h&gt;</code><br />
<code>#include &lt;ctype.h&gt;</code><br />
<code>#include &lt;stdlib.h&gt;</code><br />
<code>#include &lt;string.h&gt;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-nested-classes" class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:NameList" id="r_NameList"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_name_list.html">NameList</a></td></tr>
<tr class="memitem:State" id="r_State"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_state.html">State</a></td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-typedef-members" class="groupheader"><a id="typedef-members" name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:abe7ae6b6ec720f7d9521ed404b163512" id="r_abe7ae6b6ec720f7d9521ed404b163512"><td class="memItemLeft" align="right" valign="top"><a id="abe7ae6b6ec720f7d9521ed404b163512" name="abe7ae6b6ec720f7d9521ed404b163512"></a>
typedef enum StateFile_t&#160;</td><td class="memItemRight" valign="bottom"><b>StateFile_t</b></td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-enum-members" class="groupheader"><a id="enum-members" name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:a5247db1bcea954bbf1018d9bd6fb9263" id="r_a5247db1bcea954bbf1018d9bd6fb9263"><td class="memItemLeft" align="right" valign="top"><a id="a5247db1bcea954bbf1018d9bd6fb9263" name="a5247db1bcea954bbf1018d9bd6fb9263"></a>enum &#160;</td><td class="memItemRight" valign="bottom"><b>StateFile_t</b> { <b>OLD</b> =0
, <b>NEW</b> =1
, <b>UNSET</b> =2
 }</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-func-members" class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a8c014327019545110f2b19c2a5d031e3" id="r_a8c014327019545110f2b19c2a5d031e3"><td class="memItemLeft" align="right" valign="top"><a id="a8c014327019545110f2b19c2a5d031e3" name="a8c014327019545110f2b19c2a5d031e3"></a>
<a class="el" href="struct_name_list.html">NameList</a> *&#160;</td><td class="memItemRight" valign="bottom"><b>NameList_append</b> (<a class="el" href="struct_name_list.html">NameList</a> *self, const char *name)</td></tr>
<tr class="memitem:a4ebb378f980997e788e771861c8c9dc7" id="r_a4ebb378f980997e788e771861c8c9dc7"><td class="memItemLeft" align="right" valign="top"><a id="a4ebb378f980997e788e771861c8c9dc7" name="a4ebb378f980997e788e771861c8c9dc7"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>NameList_free</b> (<a class="el" href="struct_name_list.html">NameList</a> *self)</td></tr>
<tr class="memitem:a036845f0a1e1979f16fe45e392cba465" id="r_a036845f0a1e1979f16fe45e392cba465"><td class="memItemLeft" align="right" valign="top"><a id="a036845f0a1e1979f16fe45e392cba465" name="a036845f0a1e1979f16fe45e392cba465"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>NameList_size</b> (<a class="el" href="struct_name_list.html">NameList</a> *self)</td></tr>
<tr class="memitem:a6daee5a49333600862fc0de89e2da2d3" id="r_a6daee5a49333600862fc0de89e2da2d3"><td class="memItemLeft" align="right" valign="top"><a id="a6daee5a49333600862fc0de89e2da2d3" name="a6daee5a49333600862fc0de89e2da2d3"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>NameList_print</b> (<a class="el" href="struct_name_list.html">NameList</a> *self, FILE *fp)</td></tr>
<tr class="memitem:a59f4cce4917deeac5ec520fd1ba4e2a0" id="r_a59f4cce4917deeac5ec520fd1ba4e2a0"><td class="memItemLeft" align="right" valign="top"><a id="a59f4cce4917deeac5ec520fd1ba4e2a0" name="a59f4cce4917deeac5ec520fd1ba4e2a0"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>State_npoints</b> (<a class="el" href="struct_state.html">State</a> *self)</td></tr>
<tr class="memitem:a9e0e855736e62404ab8ea0c02d2cac16" id="r_a9e0e855736e62404ab8ea0c02d2cac16"><td class="memItemLeft" align="right" valign="top"><a id="a9e0e855736e62404ab8ea0c02d2cac16" name="a9e0e855736e62404ab8ea0c02d2cac16"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>State_nparameters</b> (<a class="el" href="struct_state.html">State</a> *self)</td></tr>
<tr class="memitem:affd07a3a6e9d1d89d46ab89e554f5004" id="r_affd07a3a6e9d1d89d46ab89e554f5004"><td class="memItemLeft" align="right" valign="top"><a id="affd07a3a6e9d1d89d46ab89e554f5004" name="affd07a3a6e9d1d89d46ab89e554f5004"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>State_setCost</b> (<a class="el" href="struct_state.html">State</a> *self, int ndx, double cost)</td></tr>
<tr class="memitem:a3fa6a65949d40f43634c7fc4d66f1b2a" id="r_a3fa6a65949d40f43634c7fc4d66f1b2a"><td class="memItemLeft" align="right" valign="top"><a id="a3fa6a65949d40f43634c7fc4d66f1b2a" name="a3fa6a65949d40f43634c7fc4d66f1b2a"></a>
double&#160;</td><td class="memItemRight" valign="bottom"><b>State_getCost</b> (<a class="el" href="struct_state.html">State</a> *self, int ndx)</td></tr>
<tr class="memitem:af704924e87cbc4b57db5af05a98639c2" id="r_af704924e87cbc4b57db5af05a98639c2"><td class="memItemLeft" align="right" valign="top"><a id="af704924e87cbc4b57db5af05a98639c2" name="af704924e87cbc4b57db5af05a98639c2"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>State_setVector</b> (<a class="el" href="struct_state.html">State</a> *self, int ndx, int dim, double x[dim])</td></tr>
<tr class="memitem:a52bd28b257cf1666c395f2999ad4506d" id="r_a52bd28b257cf1666c395f2999ad4506d"><td class="memItemLeft" align="right" valign="top"><a id="a52bd28b257cf1666c395f2999ad4506d" name="a52bd28b257cf1666c395f2999ad4506d"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>State_getVector</b> (<a class="el" href="struct_state.html">State</a> *self, int ndx, int dim, double x[dim])</td></tr>
<tr class="memitem:ab2e7389a62ec1c59e77840cca6bb001c" id="r_ab2e7389a62ec1c59e77840cca6bb001c"><td class="memItemLeft" align="right" valign="top"><a id="ab2e7389a62ec1c59e77840cca6bb001c" name="ab2e7389a62ec1c59e77840cca6bb001c"></a>
<a class="el" href="struct_state.html">State</a> *&#160;</td><td class="memItemRight" valign="bottom"><b>State_new</b> (int npts, int npar)</td></tr>
<tr class="memitem:a6593d66478a4edcd1b691b734960c47a" id="r_a6593d66478a4edcd1b691b734960c47a"><td class="memItemLeft" align="right" valign="top"><a id="a6593d66478a4edcd1b691b734960c47a" name="a6593d66478a4edcd1b691b734960c47a"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>State_free</b> (<a class="el" href="struct_state.html">State</a> *self)</td></tr>
<tr class="memitem:af6023d209c63b92baacc01935cd3364d" id="r_af6023d209c63b92baacc01935cd3364d"><td class="memItemLeft" align="right" valign="top"><a id="af6023d209c63b92baacc01935cd3364d" name="af6023d209c63b92baacc01935cd3364d"></a>
<a class="el" href="struct_state.html">State</a> *&#160;</td><td class="memItemRight" valign="bottom"><b>State_read</b> (const char *fname, int npar, const char *const *name)</td></tr>
<tr class="memitem:aeebfa36c65ff8b5901031f136b20deb9" id="r_aeebfa36c65ff8b5901031f136b20deb9"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aeebfa36c65ff8b5901031f136b20deb9">State_setName</a> (<a class="el" href="struct_state.html">State</a> *self, int ndx, const char *name)</td></tr>
<tr class="memdesc:aeebfa36c65ff8b5901031f136b20deb9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set name of parameter with index "ndx".  <br /></td></tr>
<tr class="memitem:ab65cb2aefa1955cba1d2cd3710185c7a" id="r_ab65cb2aefa1955cba1d2cd3710185c7a"><td class="memItemLeft" align="right" valign="top"><a id="ab65cb2aefa1955cba1d2cd3710185c7a" name="ab65cb2aefa1955cba1d2cd3710185c7a"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>State_print</b> (<a class="el" href="struct_state.html">State</a> *self, FILE *fp)</td></tr>
<tr class="memitem:a00a995f67457d2d262b938eafceb8740" id="r_a00a995f67457d2d262b938eafceb8740"><td class="memItemLeft" align="right" valign="top"><a id="a00a995f67457d2d262b938eafceb8740" name="a00a995f67457d2d262b938eafceb8740"></a>
<a class="el" href="struct_state.html">State</a> *&#160;</td><td class="memItemRight" valign="bottom"><b>State_readList</b> (<a class="el" href="struct_name_list.html">NameList</a> *list, int npts, int npar, const char *const *name)</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-var-members" class="groupheader"><a id="var-members" name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:aa1eae99e5c6c0273ed8f9ea2398f462c" id="r_aa1eae99e5c6c0273ed8f9ea2398f462c"><td class="memItemLeft" align="right" valign="top"><a id="aa1eae99e5c6c0273ed8f9ea2398f462c" name="aa1eae99e5c6c0273ed8f9ea2398f462c"></a>
static const char *&#160;</td><td class="memItemRight" valign="bottom"><b>file_format_2</b> = &quot;format-2&quot;</td></tr>
</table>
<a name="details" id="details"></a><h2 id="header-details" class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Read and write "state files", which describe the state of the optmizer. </p>
<p>This file implements classes <a class="el" href="struct_name_list.html">NameList</a> and <a class="el" href="struct_state.html">State</a>.</p>
<p><a class="el" href="struct_name_list.html">NameList</a> stores file names in a linked list. It is used for storing the names of state files while processing command-line arguments. Then State_readList uses this list of file names to construct a single <a class="el" href="struct_state.html">State</a> object.</p>
<p><a class="el" href="struct_state.html">State</a> records the parameter values and the cost value of each point in the swarm maintained by the differential evolution algorithm. There are functions for moving data into and out of the <a class="el" href="struct_state.html">State</a> object and for reading from and writing to files.</p>
<p>The format of the state file changed in early July, 2018. Before that date, the state file did not include names of parameters. Parameter values in the state file had to be arranged in the same order as the free parameters in the .lgo file. If the .lgo and state files referred to different parameters or to the same parameters in a different order, parameters would get the wrong values. No error was detected unless this misassignment resulted in a tree that was not feasible&ndash;for example, one in which a segment of the population tree was older than its parent in the tree.</p>
<p>The new state file format includes the names of parameters, and the input routine compares these against the names of free parameters in the .lgo file. The two lists must have the same parameters in the same order. Otherwise, legofit aborts with an error message. Old- and new-format state files can both be input using &ndash;stateIn arguments and can be intermingled in a single legofit run.</p>
<dl class="section copyright"><dt>Copyright</dt><dd>Copyright (c) 2018, Alan R. Rogers <a href="#" onclick="location.href='mai'+'lto:'+'rog'+'er'+'s@a'+'nt'+'hro'+'.u'+'tah'+'.e'+'du'; return false;">roger<span class="obfuscator">.nosp@m.</span>s@an<span class="obfuscator">.nosp@m.</span>thro.<span class="obfuscator">.nosp@m.</span>utah<span class="obfuscator">.nosp@m.</span>.edu</a>. This file is released under the Internet Systems Consortium License, which can be found in file "LICENSE". </dd></dl>
</div><a name="doc-func-members" id="doc-func-members"></a><h2 id="header-doc-func-members" class="groupheader">Function Documentation</h2>
<a id="aeebfa36c65ff8b5901031f136b20deb9" name="aeebfa36c65ff8b5901031f136b20deb9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aeebfa36c65ff8b5901031f136b20deb9">&#9670;&#160;</a></span>State_setName()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int State_setName </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_state.html">State</a> *</td>          <td class="paramname"><span class="paramname"><em>self</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>ndx</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *</td>          <td class="paramname"><span class="paramname"><em>name</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set name of parameter with index "ndx". </p>
<p>Return 0 on success, abort on failure. </p>

<p class="reference">References <a class="el" href="misc_8c.html#a5e668cae5eacedc044e64b582f71341f">dostacktrace()</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on <span class="timestamp"></span> for Legofit by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.14.0
</small></address>
</div><!-- doc-content -->
</body>
</html>
